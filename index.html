<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Trend Analyzer: Bold Pattern Text Designs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Earthy Creator -->
    <!-- Application Structure Plan: The application is designed as a single-page, scrollable dashboard with a sticky navigation. This non-linear structure allows a user (a digital creator) to freely explore different facets of the market intelligence‚Äîpatterns, words, and platform strategies‚Äîbased on their immediate interest. It prioritizes discovery and quick access to actionable insights over the linear format of the original report. Key interactions involve clicking on categories to dynamically update content and visualizations, providing immediate feedback and comparative context, which is ideal for strategic decision-making. -->
    <!-- Visualization & Content Choices: The report's qualitative data on market appeal is visualized using a radar chart. Report Info: 5 Pattern Categories. Goal: Compare market characteristics. Viz: Radar Chart (Chart.js) with axes for 'Evergreen Appeal', 'Seasonal Potential', 'Niche Focus', and 'Design Versatility'. Interaction: Clicking a pattern button updates the chart. Justification: This provides a unique visual 'fingerprint' for each pattern's strategic potential, turning abstract concepts into a comparable dashboard. For strategic advice, interactive cards and toggle sections are used to organize information, reducing cognitive load and allowing users to drill down into specific areas like Etsy vs. Canva strategies. This supports the goal of making complex information digestible and actionable. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #FDFBF8; }
        .chart-container { position: relative; width: 100%; max-width: 550px; margin-left: auto; margin-right: auto; height: 300px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        .active-nav { color: #8A5A44; border-bottom: 2px solid #8A5A44; }
        .inactive-nav { color: #AFA093; border-bottom: 2px solid transparent; }
        .active-btn { background-color: #8A5A44; color: #FDFBF8; }
        .inactive-btn { background-color: #E7E0D9; color: #8A5A44; }
        .content-card { transition: all 0.3s ease-in-out; }
        /* Styling for the generated output div */
        .generated-output-container {
            min-height: 150px; /* Ensure it has some height even when empty */
            max-height: 300px; /* Limit max height */
            overflow-y: auto; /* Add scroll if content overflows */
            white-space: pre-wrap; /* Preserve whitespace and wrap text */
            word-wrap: break-word; /* Break long words */
        }
        .generated-output-container ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .generated-output-container li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body class="text-[#5C3A2E]">

    <header class="bg-[#E7E0D9] text-center py-12 px-4">
        <h1 class="text-4xl md:text-5xl font-extrabold text-[#8A5A44] mb-3">Bold Pattern Text Design Trend Analyzer</h1>
        <p class="max-w-3xl mx-auto text-lg text-[#5C3A2E]">An interactive guide to capitalizing on the top-selling pattern text trend on Etsy & Canva. Explore what to create and how to sell it.</p>
    </header>

    <nav id="navbar" class="sticky top-0 bg-[#FDFBF8]/80 backdrop-blur-md z-50 shadow-sm">
        <div class="max-w-5xl mx-auto px-4">
            <div class="flex justify-center items-center space-x-4 md:space-x-8 h-16">
                <a href="#overview" class="nav-link text-sm md:text-base font-bold py-2 transition-colors duration-300">Trend Overview</a>
                <a href="#explorer" class="nav-link text-sm md:text-base font-bold py-2 transition-colors duration-300">Opportunity Explorer</a>
                <a href="#strategy" class="nav-link text-sm md:text-base font-bold py-2 transition-colors duration-300">Strategy Guide</a>
                <a href="#creative-assistant" class="nav-link text-sm md:text-base font-bold py-2 transition-colors duration-300">Creative Assistant</a>
                <a href="#checklist" class="nav-link text-sm md:text-base font-bold py-2 transition-colors duration-300">Action Checklist</a>
            </div>
        </div>
    </nav>

    <main class="max-w-5xl mx-auto p-4 md:p-8">

        <section id="overview" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-4 text-[#8A5A44]">Why This Trend Matters</h2>
            <p class="text-center max-w-3xl mx-auto mb-8">
                The "Bold Pattern Text" trend is a consistent top-seller, especially for print-on-demand products. The key to success is creating high-quality, seamless patterns that are versatile and easy for customers to use. Your ability to create color-changeable patterns with transparent backgrounds in Illustrator is a significant market advantage. This dashboard breaks down how to leverage that skill.
            </p>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-center">
                <div class="bg-white p-6 rounded-lg shadow-md border border-[#E7E0D9]">
                    <span class="text-4xl font-bold text-[#8A5A44]">5</span>
                    <p class="mt-2 font-semibold">Core Pattern Styles</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-[#E7E0D9]">
                    <span class="text-4xl font-bold text-[#8A5A44]">5</span>
                    <p class="mt-2 font-semibold">Winning Word Themes</p>
                </div>
                 <div class="bg-white p-6 rounded-lg shadow-md border border-[#E7E0D9]">
                    <span class="text-4xl font-bold text-[#8A5A44]">SVG</span>
                    <p class="mt-2 font-semibold">Is the Optimal Format</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-[#E7E0D9]">
                    <span class="text-xl font-bold text-[#8A5A44]">Bundling</span>
                    <p class="mt-2 font-semibold">Drives Etsy Sales</p>
                </div>
            </div>
        </section>

        <section id="explorer" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#8A5A44]">Opportunity Explorer</h2>
            <p class="text-center max-w-3xl mx-auto mb-8">
                Interactively explore the most profitable pattern styles and word categories. Click a pattern button to see its market profile on the radar chart and discover relevant keywords.
            </p>

            <div class="flex flex-wrap justify-center gap-2 mb-8">
                 <button class="pattern-btn px-4 py-2 rounded-full font-semibold transition-all duration-300" data-pattern="floral">üå∏ Floral</button>
                 <button class="pattern-btn px-4 py-2 rounded-full font-semibold transition-all duration-300" data-pattern="retro">üï∫ Retro & Groovy</button>
                 <button class="pattern-btn px-4 py-2 rounded-full font-semibold transition-all duration-300" data-pattern="animal">üêæ Animal Print</button>
                 <button class="pattern-btn px-4 py-2 rounded-full font-semibold transition-all duration-300" data-pattern="doodle">‚úèÔ∏è Doodle & Abstract</button>
                 <button class="pattern-btn px-4 py-2 rounded-full font-semibold transition-all duration-300" data-pattern="geometric">üí† Geometric & Stripes</button>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                <div class="bg-white p-6 rounded-lg shadow-lg border border-[#E7E0D9] content-card">
                    <h3 id="pattern-title" class="text-2xl font-bold mb-4 text-[#8A5A44]"></h3>
                    <p id="pattern-desc" class="mb-4"></p>
                    <h4 class="font-bold mb-2">Top Keywords:</h4>
                    <div id="pattern-keywords" class="flex flex-wrap gap-2"></div>
                </div>
                <div class="chart-container">
                    <canvas id="patternChart"></canvas>
                </div>
            </div>
        </section>

        <section id="strategy" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#8A5A44]">Platform Strategy Guide</h2>
            <p class="text-center max-w-3xl mx-auto mb-8">
                Success requires different strategies for Etsy and Canva. Use this guide to understand how to package your products and monetize your skills on each platform.
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="bg-white p-6 rounded-lg shadow-lg border border-[#E7E0D9]">
                    <h3 class="text-2xl font-bold mb-4 text-[#8A5A44]">üöÄ Etsy: Maximize Value with Bundles</h3>
                    <p class="mb-4">On Etsy, buyers seek comprehensive solutions. Bundling increases perceived value and average order size. Your goal is to provide a complete toolkit for the customer's project.</p>
                    <ul class="space-y-3 list-disc list-inside">
                        <li><strong>Alphabet & Number Bundles:</strong> Offer a full A-Z set in a single pattern style. This is a top-selling format for crafters.</li>
                        <li><strong>Themed Phrase Packs:</strong> Group related sayings (e.g., "Sarcastic Summer," "Mom Life") to target specific buyer needs.</li>
                        <li><strong>Pattern Variety Packs:</strong> Bundle several of your seamless patterns to give buyers creative flexibility for their own text fills.</li>
                        <li><strong>Use Great Mockups:</strong> Visually showcase how the patterns look on actual products like t-shirts and mugs to drive conversions.</li>
                    </ul>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-lg border border-[#E7E0D9]">
                     <h3 class="text-2xl font-bold mb-4 text-[#8A5A44]">üíé Canva: Monetize as an Element Creator</h3>
                     <p class="mb-4">Canva offers a passive income stream by selling individual elements to millions of users. Quality and technical format are paramount here.</p>
                     <ul class="space-y-3 list-disc list-inside">
                        <li><strong>SVG is King:</strong> Submit your patterns as SVG files. This is critical as it allows users to change colors directly within Canva, a huge selling point.</li>
                        <li><strong>Originality & Quality:</strong> Your designs must be unique and high-quality to be accepted and to stand out in the marketplace.</li>
                        <li><strong>Master Keywords:</strong> Use descriptive keywords (e.g., 'seamless pattern', 'text fill', 'editable floral') to ensure your elements are discoverable in Canva's library.</li>
                        <li><strong>Understand Licensing:</strong> You retain ownership, but Canva users can use your premium graphics in designs for resale. You cannot sell standalone, unmodified assets.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="creative-assistant" class="mb-16 scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#8A5A44]">Creative Assistant ‚ú®</h2>
            <p class="text-center max-w-3xl mx-auto mb-8">
                Leverage AI to brainstorm new design ideas, craft compelling Etsy listing titles, or generate effective Canva keywords.
            </p>
            <div class="bg-white p-6 rounded-lg shadow-lg border border-[#E7E0D9] max-w-3xl mx-auto">
                <div class="mb-4">
                    <label for="pattern-select" class="block text-sm font-medium text-gray-700 mb-1">Select Pattern Type:</label>
                    <select id="pattern-select" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-[#8A5A44] focus:border-[#8A5A44] sm:text-sm rounded-md bg-[#FDFBF8]">
                        <option value="floral">üå∏ Floral</option>
                        <option value="retro">üï∫ Retro & Groovy</option>
                        <option value="animal">üêæ Animal Print</option>
                        <option value="doodle">‚úèÔ∏è Doodle & Abstract</option>
                        <option value="geometric">üí† Geometric & Stripes</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label for="theme-select" class="block text-sm font-medium text-gray-700 mb-1">Select Word Theme:</label>
                    <select id="theme-select" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-[#8A5A44] focus:border-[#8A5A44] sm:text-sm rounded-md bg-[#FDFBF8]">
                        <option value="mama-life">üë©‚Äçüëß Mama Life</option>
                        <option value="funny-sarcastic">üòÇ Funny & Sarcastic</option>
                        <option value="seasonal-holiday">üéÑ Seasonal & Holiday</option>
                        <option value="inspirational-motivational">‚ú® Inspirational & Motivational</option>
                        <option value="pet-lovers">üê∂ Pet Lovers</option>
                        <option value="sports-hobbies">üèÄ Sports & Hobbies</option>
                        <option value="graduation">üéì Graduation</option>
                        <option value="teacher-appreciation">üçé Teacher Appreciation</option>
                    </select>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Choose Output Type:</label>
                    <div class="mt-1 flex flex-wrap gap-3">
                        <label class="inline-flex items-center">
                            <input type="radio" name="output-type" value="design-ideas" class="form-radio text-[#8A5A44] focus:ring-[#8A5A44]" checked>
                            <span class="ml-2 text-sm text-gray-700">Design Ideas</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="output-type" value="etsy-title" class="form-radio text-[#8A5A44] focus:ring-[#8A5A44]">
                            <span class="ml-2 text-sm text-gray-700">Etsy Listing Title</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="output-type" value="canva-keywords" class="form-radio text-[#8A5A44] focus:ring-[#8A5A44]">
                            <span class="ml-2 text-sm text-gray-700">Canva Keywords</span>
                        </label>
                    </div>
                </div>
                <button id="generate-ideas-btn" class="w-full bg-[#8A5A44] text-white py-2 px-4 rounded-md hover:bg-[#AFA093] transition-colors duration-300 font-semibold flex items-center justify-center">
                    Generate Ideas ‚ú®
                    <span id="loading-spinner" class="hidden ml-2 w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></span>
                </button>
                <div class="mt-6">
                    <label for="generated-output" class="block text-sm font-medium text-gray-700 mb-1">Generated Output:</label>
                    <!-- Changed from textarea to div to render HTML/Markdown -->
                    <div id="generated-output" class="mt-1 block w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-[#8A5A44] focus:border-[#8A5A44] sm:text-sm bg-[#FDFBF8] generated-output-container" placeholder="Your generated ideas will appear here..."></div>
                </div>
            </div>
        </section>

        <section id="checklist" class="scroll-mt-20">
            <h2 class="text-3xl font-bold text-center mb-2 text-[#8A5A44]">Your Action Checklist</h2>
            <p class="text-center max-w-3xl mx-auto mb-8">
                Use this checklist to ensure your digital products are optimized for success based on the key findings of this report.
            </p>
            <div class="bg-white max-w-2xl mx-auto p-6 rounded-lg shadow-lg border border-[#E7E0D9]">
                <ul id="action-list" class="space-y-4">
                </ul>
            </div>
        </section>

    </main>

    <footer class="text-center py-8 mt-12 bg-[#E7E0D9]">
        <p class="text-[#5C3A2E]">Interactive Report Generated from Source Analysis</p>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const patternData = {
        floral: {
            title: 'üå∏ Floral Patterns',
            description: 'Consistently a top performer. Floral patterns range from minimalist and cute to bold and vibrant, appealing to a wide demographic, especially for "Mama" and seasonal themes.',
            keywords: ['floral', 'flower', 'botanical', 'wildflower', 'preppy floral', 'vintage floral', 'hand-drawn'],
            chartData: [9, 8, 6, 9] 
        },
        retro: {
            title: 'üï∫ Retro & Groovy Patterns',
            description: 'Nostalgic styles featuring wavy lines, checkerboards, and 70s/80s color palettes. Highly popular for fun, expressive, and trendy designs.',
            keywords: ['retro', 'groovy', 'wavy', 'checkerboard', '70s font', 'vintage', 'psychedelic'],
            chartData: [7, 7, 8, 7]
        },
        animal: {
            title: 'üêæ Animal Print Patterns',
            description: 'Bold and eye-catching, prints like leopard, cheetah, and cow remain evergreen favorites. They convey a sense of fun, fashion, and wildness.',
            keywords: ['leopard print', 'cheetah', 'cow print', 'zebra print', 'safari', 'animal print'],
            chartData: [8, 4, 9, 6]
        },
        doodle: {
            title: '‚úèÔ∏è Doodle & Abstract Patterns',
            description: 'Playful, hand-drawn, and organic styles are perfect for kids\' products, teacher gifts, and adding a touch of whimsy. Highly rated by customers for their charm.',
            keywords: ['doodle', 'hand-drawn', 'abstract', 'playful', 'organic shapes', 'colorful', 'blob'],
            chartData: [8, 6, 7, 9]
        },
        geometric: {
            title: 'üí† Geometric & Stripes',
            description: 'Clean, versatile, and modern. Stripes, chevrons, and other geometric patterns are workhorses for a wide variety of themes, from sports to minimalist designs.',
            keywords: ['stripe', 'chevron', 'geometric', 'seamless pattern', 'line pattern', 'checkered'],
            chartData: [9, 3, 5, 8]
        }
    };

    const wordThemes = {
        'mama-life': {
            description: 'Themes centered around motherhood, family, and everyday mom humor.',
            examples: ['Girl Mom', 'Boy Mom', 'Chaos Coordinator', 'Coffee & Kids']
        },
        'funny-sarcastic': {
            description: 'Humorous and witty phrases, often with a sarcastic or ironic twist.',
            examples: ['Adulting Is Hard', 'Nope Not Today', 'I Need A Nap']
        },
        'seasonal-holiday': {
            description: 'Phrases related to holidays, seasons, and special events throughout the year.',
            examples: ['Merry & Bright', 'Spooky Season', 'Hello Summer', 'Pumpkin Spice Life']
        },
        'inspirational-motivational': {
            description: 'Uplifting quotes, affirmations, and empowering messages.',
            examples: ['Good Vibes Only', 'Dream Big', 'Choose Joy', 'You Got This']
        },
        'pet-lovers': {
            description: 'Themes dedicated to dogs, cats, and other beloved pets.',
            examples: ['Dog Mom', 'Cat Dad', 'Paw Print Love', 'My Best Friend Has Paws']
        },
        'sports-hobbies': {
            description: 'Phrases for sports enthusiasts, hobbyists, and specific activities.',
            examples: ['Game Day', 'Baseball Mom', 'Crafting Queen', 'Book Lover']
        },
        'graduation': {
            description: 'Messages celebrating academic achievements and graduations.',
            examples: ['Class of 2025', 'Proud Graduate', 'She Believed She Could']
        },
        'teacher-appreciation': {
            description: 'Quotes and sayings to show appreciation for teachers and educators.',
            examples: ['Teaching Is My Jam', 'Best Teacher Ever', 'Educator Life']
        }
    };
    
    const actionItems = [
        "Prioritize high-demand patterns: Floral, Retro, Animal Print, etc.",
        "Align patterns with high-converting words: Mama, Seasonal, Funny.",
        "Export all final patterns in SVG format for color-editability.",
        "Create comprehensive Alphabet & Number bundles for Etsy.",
        "Develop themed phrase packs to target niche buyers on Etsy.",
        "Use high-quality mockups to showcase product versatility.",
        "Apply to the Canva Element Creator program for passive income.",
        "Use rich, descriptive keywords for discoverability on both platforms."
    ];

    let patternChart;
    let currentState = {
        activePattern: 'floral',
    };

    const patternTitleEl = document.getElementById('pattern-title');
    const patternDescEl = document.getElementById('pattern-desc');
    const patternKeywordsEl = document.getElementById('pattern-keywords');
    const patternButtons = document.querySelectorAll('.pattern-btn');

    const patternSelectEl = document.getElementById('pattern-select');
    const themeSelectEl = document.getElementById('theme-select');
    const outputTypeRadios = document.querySelectorAll('input[name="output-type"]');
    const generateIdeasBtn = document.getElementById('generate-ideas-btn');
    const loadingSpinner = document.getElementById('loading-spinner');
    // Changed from textarea to div
    const generatedOutputEl = document.getElementById('generated-output');

    function init() {
        updatePatternView(currentState.activePattern);
        renderChecklist();
        setupNavObserver();
    }

    function updatePatternView(patternKey) {
        currentState.activePattern = patternKey;
        const data = patternData[patternKey];

        patternTitleEl.textContent = data.title;
        patternDescEl.textContent = data.description;
        
        patternKeywordsEl.innerHTML = '';
        data.keywords.forEach(keyword => {
            const span = document.createElement('span');
            span.className = 'bg-[#E7E0D9] text-[#8A5A44] text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full';
            span.textContent = keyword;
            patternKeywordsEl.appendChild(span);
        });

        patternButtons.forEach(btn => {
            if (btn.dataset.pattern === patternKey) {
                btn.classList.remove('inactive-btn');
                btn.classList.add('active-btn');
            } else {
                btn.classList.remove('active-btn');
                btn.classList.add('inactive-btn');
            }
        });
        
        renderRadarChart(data.chartData, data.title);
    }
    
    function renderChecklist() {
        const listEl = document.getElementById('action-list');
        actionItems.forEach((itemText, index) => {
            const li = document.createElement('li');
            li.className = "flex items-center cursor-pointer";
            li.innerHTML = `
                <div class="check-box w-5 h-5 mr-4 border-2 border-[#AFA093] rounded flex items-center justify-center transition-all duration-300">
                    <span class="check-mark text-white text-lg hidden">‚úì</span>
                </div>
                <span class="flex-1">${itemText}</span>
            `;
            li.addEventListener('click', () => {
                const box = li.querySelector('.check-box');
                const mark = li.querySelector('.check-mark');
                const text = li.querySelector('span:last-child');
                box.classList.toggle('bg-[#8A5A44]');
                box.classList.toggle('border-[#AFA093]');
                mark.classList.toggle('hidden');
                text.classList.toggle('line-through');
                text.classList.toggle('text-gray-400');
            });
            listEl.appendChild(li);
        });
    }

    function renderRadarChart(data, label) {
        const ctx = document.getElementById('patternChart').getContext('2d');
        if (patternChart) {
            patternChart.destroy();
        }
        patternChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['Evergreen Appeal', 'Seasonal Potential', 'Niche Focus', 'Design Versatility'],
                datasets: [{
                    label: label,
                    data: data,
                    backgroundColor: 'rgba(138, 90, 68, 0.2)',
                    borderColor: 'rgba(138, 90, 68, 1)',
                    pointBackgroundColor: 'rgba(138, 90, 68, 1)',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: 'rgba(138, 90, 68, 1)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        angleLines: { color: '#E7E0D9' },
                        grid: { color: '#E7E0D9' },
                        pointLabels: { 
                            font: { size: 12, weight: 'bold' },
                             color: '#5C3A2E'
                        },
                        ticks: {
                            backdropColor: '#FDFBF8',
                            color: '#AFA093'
                        },
                        suggestedMin: 0,
                        suggestedMax: 10
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    }
                }
            }
        });
    }
    
    function setupNavObserver() {
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('section');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove('active-nav');
                        link.classList.add('inactive-nav');
                        if (link.getAttribute('href').substring(1) === entry.target.id) {
                            link.classList.add('active-nav');
                            link.classList.remove('inactive-nav');
                        }
                    });
                }
            });
        }, { rootMargin: '-50% 0px -50% 0px' });

        sections.forEach(section => {
            observer.observe(section);
        });
    }

    patternButtons.forEach(button => {
        button.addEventListener('click', (e) => {
            updatePatternView(e.target.dataset.pattern);
        });
    });

    // Simple Markdown parser
    function parseMarkdown(markdownText) {
        let htmlText = markdownText;

        // Convert bold text (e.g., **bold**)
        htmlText = htmlText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        
        // Convert bullet points (e.g., * item)
        // This is a simple conversion and assumes each bullet is on a new line
        htmlText = htmlText.replace(/^\s*\*\s*(.*)$/gm, '<li>$1</li>');
        if (htmlText.includes('<li>')) {
            htmlText = '<ul>' + htmlText + '</ul>';
        }

        // Convert newlines to breaks, but handle lists first to avoid extra breaks inside list items
        htmlText = htmlText.replace(/\n/g, '<br>');

        return htmlText;
    }

    generateIdeasBtn.addEventListener('click', async () => {
        const selectedPattern = patternSelectEl.value;
        const selectedTheme = themeSelectEl.value;
        let selectedOutputType;
        for (const radio of outputTypeRadios) {
            if (radio.checked) {
                selectedOutputType = radio.value;
                break;
            }
        }

        if (!selectedPattern || !selectedTheme || !selectedOutputType) {
            generatedOutputEl.innerHTML = "Please select a pattern, theme, and output type."; // Use innerHTML
            return;
        }

        loadingSpinner.classList.remove('hidden');
        generateIdeasBtn.disabled = true;
        generatedOutputEl.innerHTML = "Generating ideas, please wait..."; // Use innerHTML

        const patternDescription = patternData[selectedPattern].title.replace('üå∏ ', '').replace('üï∫ ', '').replace('üêæ ', '').replace('‚úèÔ∏è ', '').replace('üí† ', '');
        const themeDescription = wordThemes[selectedTheme].description;
        const themeExamples = wordThemes[selectedTheme].examples.join(', ');

        let prompt = `As an Etsy and Canva trend expert, generate `;

        if (selectedOutputType === 'design-ideas') {
            prompt += `3-5 unique and creative text phrases or design concepts for a digital product featuring a "${patternDescription}" pattern combined with a "${themeDescription}" theme. Example themes: ${themeExamples}. Use Markdown for bolding and bullet points.`;
        } else if (selectedOutputType === 'etsy-title') {
            prompt += `3 catchy and keyword-rich Etsy listing titles for a digital product featuring a "${patternDescription}" pattern combined with a "${themeDescription}" theme. Example themes: ${themeExamples}.`;
        } else if (selectedOutputType === 'canva-keywords') {
            prompt += `10-15 relevant and searchable Canva element keywords for a digital product featuring a "${patternDescription}" pattern combined with a "${themeDescription}" theme. Example themes: ${themeExamples}. Provide them as a comma-separated list.`;
        }

        try {
            // IMPORTANT: Replace "YOUR_GEMINI_API_KEY_HERE" with your actual Gemini API key.
            // You can get one from Google AI Studio: https://aistudio.google.com/app/apikey
            const apiKey = ""; 
            
            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            const response = await fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
            const result = await response.json();

            if (result.candidates && result.candidates.length > 0 &&
                result.candidates[0].content && result.candidates[0].content.parts &&
                result.candidates[0].content.parts.length > 0) {
                const rawText = result.candidates[0].content.parts[0].text;
                // Parse Markdown before displaying
                generatedOutputEl.innerHTML = parseMarkdown(rawText); 
            } else {
                generatedOutputEl.innerHTML = "Could not generate ideas. Please try again.";
            }
        } catch (error) {
            console.error("Error calling Gemini API:", error);
            generatedOutputEl.innerHTML = "An error occurred while connecting to the AI. Please try again. Check your API key and network connection.";
        } finally {
            loadingSpinner.classList.add('hidden');
            generateIdeasBtn.disabled = false;
        }
    });

    init();
});
</script>
</body>
</html>
